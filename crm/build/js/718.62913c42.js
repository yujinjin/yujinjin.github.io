"use strict";(self["webpackChunkvue_manager_system"]=self["webpackChunkvue_manager_system"]||[]).push([[718],{4094:function(e,l,a){a.d(l,{A:function(){return r}});var t=a(641),o=a(953);const u={class:"virtually-progress"},n={class:"tips-text"};var s=(0,t.pM)({__name:"virtually-progress",props:{finished:{type:Boolean,default:!1},ratio:{type:Number,default:.1,validator:function(e){return e<1&&e>0}},time:{type:Number,default:500},progress:{type:Object,default:function(){return{}}}},emits:["afterFinished"],setup(e,{emit:l}){const a=e,s=l,i=(0,o.KR)(0);let d=0;(0,t.wB)((()=>a.finished),(e=>{e||c()}));const r=(0,t.EW)((()=>Object.assign({textInside:!0,strokeWidth:26},a.progress))),c=function(){i.value=0,d&&window.clearInterval(d);let e=a.ratio,l=0;d=window.setInterval((()=>{if(++l,100===i.value)return window.clearInterval(d),d=0,void s("afterFinished");i.value>95&&a.finished?i.value=100:(e=a.finished?1:i.value>80?2*a.ratio:a.ratio*(l%10),i.value=parseInt((i.value+(99-i.value)*e*Math.random()).toFixed(4),10))}),a.time)};return(0,t.sV)((()=>{c()})),(0,t.hi)((()=>{d&&window.clearInterval(d)})),(e,l)=>{const a=(0,t.g2)("el-progress");return(0,t.uX)(),(0,t.CE)("div",u,[(0,t.bF)(a,(0,t.v6)(r.value,{percentage:i.value}),null,16,["percentage"]),(0,t.Lk)("div",n,[(0,t.RG)(e.$slots,"default")])])}}}),i=a(6262);const d=(0,i.A)(s,[["__scopeId","data-v-97ea7fae"]]);var r=d},4718:function(e,l,a){a.r(l),a.d(l,{default:function(){return Re}});var t=a(641),o=a(33),u=a(953),n=a(7918),s=a(163),i=a(8548),d=a(5747),r=a(4353),c=a.n(r),p=a(4803),v={queryPageListForCommon(e,l){return(0,p.A)(Object.assign({url:"/demo/queryPageList",data:e},l||{}))},queryConfigData(e){return(0,p.A)(Object.assign({url:"/demo/config.do"},e||{}))},queryPageOrderList(e,l){return(0,p.A)(Object.assign({url:"/demo/queryPageOrderList",method:"GET",params:e},l||{}))},addOrder(e,l){return(0,p.A)(Object.assign({url:"http://10.96.144.203:8081/demo/addOrder",data:e},l||{}))},queryOrderDetails(e,l){return(0,p.A)(Object.assign({url:"/demo/queryOrderDetails",method:"GET",params:{orderNo:e}},l||{}))},batchUpdateOrderStatus(e,l){return(0,p.A)(Object.assign({url:"/demo/batchUpdateOrderStatus",data:e},l||{}))}};const b=[{value:"H5",label:"移动端H5"},{value:"H5",label:"微信H5"},{value:"WXXCX",label:"微信小程序"},{value:"iOSApp",label:"iOS App"},{value:"androidApp",label:"android App"}],m=[{label:"订单取消",value:-1},{label:"售后中",value:-6},{label:"退款中",value:-7},{label:"已退款",value:-5},{label:"待付款",value:10},{label:"待发货",value:20},{label:"已发货",value:30},{label:"已签收",value:40},{label:"交易关闭",value:50}],f=[{label:"现金",value:"cash"},{label:"支付宝",value:"zfb"},{label:"微信",value:"wx"},{label:"银行卡",value:"bankcard"},{label:"账户余额",value:"balance"},{label:"0元订单",value:"free"}];function h({showDialogHandle:e,excelExportHandle:l,cancelOrderHandle:a,orertReportData:t}){return{searchFormProps:{fields:[{name:"orderNo",type:"input",label:"订单编号"},{name:"deviceSource",type:"select",label:"下单设备",data:b},{name:"buyer",type:"input",label:"用户ID/名称"},{name:"receiver",type:"input",label:"收货人姓名"},{name:"receiverMobileNumber",type:"input",label:"收货人手机号"},{name:"dateRange",type:"datePicker",label:"订单日期",props:{type:"daterange"},value:[c()().add(-6,"day").format("YYYY-MM-DD"),c()().format("YYYY-MM-DD")]}]},actionBarProps:{align:"right",buttons:[{text:"新增订单",handleCode:d.Cj.CREATE,click:e,props:{type:"primary"}},{text:"批量取消订单",handleCode:d.Cj.BATCHCANCEL,click:a,props:{disabled:!0}},{text:"自定义列",handleCode:d.Cj.QUERY,click:e},{text:"导出Excel",handleCode:d.Cj.EXPORT,click:l}]},dataTableProps:{filters:{orderStatus:""},query:v.queryPageOrderList,queryParametersProcess(e){return e.dateRange&&e.dateRange.length>0&&(e.startDate=e.dateRange[0],e.endDate=e.dateRange[1]),delete e.dateRange,e},queryResponseProcess(e){return t.allCount=e.allCount||0,t.pendingCount=e.pendingCount||0,t.paidCount=e.paidCount||0,t.deliveredCount=e.deliveredCount||0,t.completedCount=e.completedCount||0,t.cancelledCount=e.cancelledCount||0,t.refundedCount=e.refundedCount||0,{total:e.total,rows:e.rows}},columns:[{label:"选择",type:"selection",align:"center",width:50},{label:"订单编号",prop:"orderNo",minWidth:150,slot:"dataTable_orderNo"},{label:"订单状态",prop:"orderStatus",type:"enum",slotHeader:"dataTable_orderStatusHeader",width:100,data:m},{label:"下单设备",prop:"deviceSource",type:"enum",width:100,data:b},{label:"订单金额",prop:"orderAmount",type:"number",digit:2,width:100},{label:"实际支付金额",prop:"payAmount",type:"number",digit:2,width:120},{label:"订单时间",prop:"createTime",type:"date",formate:"YYYY-MM-DD HH:mm:ss",width:140},{label:"支付时间",prop:"payTime",type:"date",formate:"YYYY-MM-DD HH:mm:ss",width:140},{label:"订单商品数量",prop:"goodsNumber",width:120},{label:"订单商品数量",prop:"goodsNumber",width:120},{label:"订单商品图片",prop:"goodsImgs",type:"image",separator:",",minWidth:150},{label:"下单用户ID",prop:"buyerId",minWidth:150},{label:"下单用户名称",prop:"buyerName",minWidth:100},{label:"下单用户手机号",prop:"buyerMobileNumber",minWidth:120},{label:"收货人",prop:"receiver",minWidth:100},{label:"收货人电话",prop:"receiverMobileNumber",minWidth:100},{label:"订单备注",prop:"remark",minWidth:150,showOverflowTooltip:!0},{type:"action",width:120,buttons:[{text:"查看",handleCode:d.Cj.SEARCH,click:e},{text:"取消订单",handleCode:d.Cj.CANCEL,display:function(e){return 10===e.orderStatus},click:a}]}]}}}var k=a(3751),y=a(7419),g=a(2477);const _={class:"search-panel"},C={class:"column-list-panel"},w={class:"left-contents"},F={key:0,class:"loading-text"},x={key:1,class:"empty-text"},S={key:2,class:"checkbox-list-wrapper"},L=["title"],W={key:3,class:"checkbox-list-wrapper"},R=["title"],K={class:"right-contents"},E={class:"header-row"},V={class:"label-text"},A={class:"inner-row"},X=["title"],N={class:"error-tips"};var I=(0,t.pM)({__name:"customer-column-dialog",props:{isShow:{type:Boolean},fixedColumnKeys:{type:Array},localStorageKey:{type:String},groupColumnKeys:{type:Array},tableColumns:{type:Array,required:!0},minSelecedNumber:{type:Number,default:1}},emits:["close","save"],setup(e,{emit:l}){const a=e,n=l,s=(0,u.KR)([]),d=(0,u.KR)(!1),r=(0,u.KR)(!1),c=(0,u.KR)(""),p=(0,u.KR)(!1),v=(0,u.KR)(!1),b=(0,u.KR)([]),m=(0,t.EW)((()=>a.groupColumnKeys?s.value.map((e=>e.childList)).flat():s.value)),f=(0,t.EW)((()=>m.value.filter((e=>e.selected)))),h=function(){const e=a.localStorageKey&&(0,g._)(a.localStorageKey);if(a.groupColumnKeys)a.groupColumnKeys.forEach((({name:l,key:t,childList:o})=>{const u={name:l,key:t,isShow:!0,selected:!1,indeterminate:!1,childList:o.map((l=>{const t=a.tableColumns.find((e=>e.prop===l));return{name:t?.label||"-",key:l,disabled:a.fixedColumnKeys?a.fixedColumnKeys.includes(l):!!t?.fixed||!1,isShow:!0,selected:!e||e.includes(l)}}))},n=u.childList.filter((e=>e.selected)).length;u.selected=u.childList.length===n,u.indeterminate=n>0&&n<u.childList.length,s.value.push(u),b.value.push(t)}));else{a.tableColumns.forEach((l=>{!l.prop||l.type&&["index","selection","expand","action"].includes(l.type)||s.value.push({name:l.label||"-",key:l.prop,disabled:l.prop&&a.fixedColumnKeys?a.fixedColumnKeys.includes(l.prop):!!l?.fixed||!1,isShow:!0,selected:!e||e.includes(l.prop)})}));const l=s.value.filter((e=>e.selected)).length;p.value=l===s.value.length,v.value=l>0&&l<s.value.length}e&&n("save",e)},I=(0,y.sg)((function(){a.groupColumnKeys?s.value.forEach(((e,l)=>{e.childList.forEach((e=>{e.isShow=e.name.includes(c.value)})),e.isShow=e.childList.some((e=>e.isShow)),D(e.selected,!1,l)})):(s.value.forEach((e=>{e.isShow=e.name.includes(c.value)})),D(p.value,!1)),d.value=!1,r.value=s.value.every((e=>!e.isShow))}),200),M=function(){d.value=!0,I()},q=function(){n("close")},D=function(e,l,t){if(l&&!a.groupColumnKeys)s.value.forEach((l=>{l.isShow&&!l.disabled&&(l.selected=e)})),v.value=!e&&s.value.some((e=>e.selected));else if(l&&a.groupColumnKeys)s.value[t].childList.forEach((l=>{l.isShow&&!l.disabled&&(l.selected=e)})),s.value[t].indeterminate=!e&&s.value[t].childList.some((e=>e.selected));else if(a.groupColumnKeys){const e=s.value[t].childList.filter((e=>e.selected&&e.isShow)).length,l=s.value[t].childList.filter((e=>e.isShow)).length;s.value[t].selected=l>0&&e===l,s.value[t].indeterminate=e>0&&e<l}else{const e=s.value.filter((e=>e.selected&&e.isShow)).length,l=s.value.filter((e=>e.isShow)).length;p.value=l>0&&e===l,v.value=e>0&&e<l}},Y=function(){a.groupColumnKeys?s.value.forEach((e=>{e.selected=!0,e.indeterminate=!1,e.childList.forEach((e=>{e.selected=!0}))})):(s.value.forEach((e=>{e.selected=!0})),p.value=!0,v.value=!1)},H=function(e){if(m.value[e].selected=!1,a.groupColumnKeys){const l=m.value[e].key,a=s.value.findIndex((e=>-1!==e.childList.findIndex((e=>e.key===l))));D(!1,!1,a)}else D(!1,!1)},O=function(){const e=m.value.filter((e=>e.selected)).map((e=>e.key));a.localStorageKey&&(0,g.K)(a.localStorageKey,e,0),n("save",e),n("close")};return h(),(l,a)=>{const n=(0,t.g2)("el-input"),h=(0,t.g2)("el-checkbox"),y=(0,t.g2)("el-col"),g=(0,t.g2)("el-row"),I=(0,t.g2)("el-collapse-item"),T=(0,t.g2)("el-collapse"),j=(0,t.g2)("el-icon"),P=(0,t.g2)("el-button"),U=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(U,{"model-value":e.isShow,title:"自定义列",width:"750px",appendToBody:"",destroyOnClose:"",onClosed:q,"close-on-click-modal":!1,class:"custom-column-dialog"},{footer:(0,t.k6)((()=>[(0,t.bF)(P,{onClick:q},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1}),(0,t.bF)(P,{disabled:f.value.length<=e.minSelecedNumber,type:"primary",onClick:O},{default:(0,t.k6)((()=>[(0,t.eW)("应用")])),_:1},8,["disabled"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",_,[(0,t.bF)(n,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),modelModifiers:{trim:!0},style:{width:"360px"},clearable:"",placeholder:"搜索列名","prefix-icon":(0,u.R1)(i.vji),onInput:M},null,8,["modelValue","prefix-icon"])]),(0,t.Lk)("div",C,[(0,t.Lk)("div",w,[d.value?((0,t.uX)(),(0,t.CE)("div",F,"数据匹配中...")):r.value?((0,t.uX)(),(0,t.CE)("div",x,"未匹配到数据")):e.groupColumnKeys?((0,t.uX)(),(0,t.CE)("div",S,[(0,t.bF)(T,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.value,((e,l)=>(0,t.bo)(((0,t.uX)(),(0,t.Wv)(I,{key:e.key,name:e.key},{title:(0,t.k6)((()=>[(0,t.bF)(h,{onClick:a[1]||(a[1]=(0,k.D$)((()=>{}),["stop"])),modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l,indeterminate:e.indeterminate,label:e.key,onChange:a=>D(e.selected,!0,l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","label","onChange"])])),default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.childList,(a=>(0,t.bo)(((0,t.uX)(),(0,t.Wv)(y,{span:12,key:a.key},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,label:a.key,disabled:a.disabled,onChange:a=>D(e.selected,!1,l)},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{class:"checkbox-label-text",title:a.name},(0,o.v_)(a.name),9,L)])),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled","onChange"])])),_:2},1024)),[[k.aG,a.isShow]]))),128))])),_:2},1024)])),_:2},1032,["name"])),[[k.aG,e.isShow]]))),128))])),_:1},8,["modelValue"])])):((0,t.uX)(),(0,t.CE)("div",W,[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.bF)(y,{span:24},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=e=>p.value=e),indeterminate:v.value,label:"全选",onChange:a[4]||(a[4]=e=>D(p.value,!0))},null,8,["modelValue","indeterminate"])])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.value,(e=>(0,t.bo)(((0,t.uX)(),(0,t.Wv)(y,{key:e.key,span:12},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l,disabled:e.disabled,onChange:l=>D(e.selected,!1)},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{class:"checkbox-label-text",title:e.name},(0,o.v_)(e.name),9,R)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1024)),[[k.aG,e.isShow]]))),128))])),_:1})]))]),(0,t.Lk)("div",K,[(0,t.Lk)("div",E,[(0,t.Lk)("div",V,"已选指标("+(0,o.v_)(f.value.length)+")",1),(0,t.Lk)("div",{class:"label-text active",onClick:Y},"恢复初始")]),(0,t.Lk)("div",A,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.value,((e,l)=>(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",{class:"row-info",key:e.key},[(0,t.Lk)("div",{class:"name-text",title:e.name},(0,o.v_)(e.name),9,X),e.disabled?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(j,{key:0,onClick:e=>H(l)},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(i.epd))])),_:2},1032,["onClick"]))])),[[k.aG,e.selected]]))),128))])])]),(0,t.Lk)("div",N,[f.value.length<=e.minSelecedNumber?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("至少选中"+(0,o.v_)(e.minSelecedNumber)+"列数据",1)],64)):(0,t.Q3)("",!0)])])),_:1},8,["model-value"])}}});const M=I;var q=M,D=a(7576),Y=a.n(D);const H={class:"table-column-copy"},O={class:"text"};var T=(0,t.pM)({__name:"table-column-copy",props:{value:{type:String},copyTips:{type:String,default:"复制"}},setup(e){const l=e,a=(0,u.KR)(),n=function(){const e=new(Y())(a.value,{text:function(){return l.value}});e.on("success",(()=>{(0,s.nk)({message:"复制成功",type:"success",duration:1e3}),e.destroy()})),e.on("error",(()=>{s.nk.error("复制失败"),e.destroy()}))};return(l,s)=>{const d=(0,t.g2)("el-icon"),r=(0,t.g2)("el-tooltip");return(0,t.uX)(),(0,t.CE)("div",H,[(0,t.Lk)("span",O,(0,o.v_)(e.value||"-"),1),e.value?((0,t.uX)(),(0,t.Wv)(r,{key:0,effect:"dark",content:e.copyTips},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:"icon-box",ref_key:"elIconRef",ref:a},[(0,t.bF)(d,{onClick:n},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(i.f5b))])),_:1})],512)])),_:1},8,["content"])):(0,t.Q3)("",!0)])}}}),j=a(6262);const P=(0,j.A)(T,[["__scopeId","data-v-3b824a78"]]);var U=P,B=a(9811);const Q=e=>((0,t.Qi)("data-v-6f555546"),e=e(),(0,t.jt)(),e),G=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"订单信息",-1))),$=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"支付信息",-1))),z=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"商品列表",-1))),J=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"使用优惠券列表",-1))),Z=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"物流信息",-1))),ee=Q((()=>(0,t.Lk)("div",{class:"title-bar"},"售后信息",-1))),le={class:"dialog-footer"};var ae=(0,t.pM)({__name:"view-order-details-dialog",props:{row:{type:Object}},emits:["close"],setup(e,{emit:l}){const a=e,n=l,s=(0,u.KR)(["1","2","3","4","5","6"]),i=function(){n("close",!1)},d=(0,u.KR)(!1),r=(0,u.KR)({}),c=[{label:"商品名称",prop:"name",width:100,fixed:!0},{label:"参加活动",prop:"activity",width:100},{label:"商品图片",prop:"img",type:"image",width:100},{label:"商品CODE",prop:"code",width:100},{label:"商品规格",prop:"specs",minWidth:100},{label:"商品数量",prop:"quantity",type:"number",width:100},{label:"商品金额(元)",prop:"price",type:"number",digit:2,width:100},{label:"优惠金额(元)",prop:"discountPriceInYuan",type:"number",digit:2,width:100},{label:"小计(元)",prop:"totalAmount",type:"number",digit:2,formatter:function(e){return e.price*e.quantity},width:100}],p=[{label:"优惠类型",prop:"type",width:120},{label:"券名称",prop:"name",minWidth:120},{label:"券面优惠金额",prop:"amount",type:"number",digit:2,width:100},{label:"券数量",prop:"quantity",type:"number",width:100}],h=function(e,l){return l.find((l=>l.value===e))?.label||"-"},k=async function(){try{r.value=await v.queryOrderDetails(a.row.orderNo,{isShowLoading:!0}),d.value=!0}catch(e){i()}};return k(),(e,l)=>{const a=(0,t.g2)("el-tag"),n=(0,t.g2)("el-descriptions-item"),v=(0,t.g2)("el-descriptions"),k=(0,t.g2)("el-collapse-item"),y=(0,t.g2)("data-table"),g=(0,t.g2)("el-collapse"),_=(0,t.g2)("el-button"),C=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(C,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),title:"查看订单详细信息",class:"common-dialog",width:"800px",onClosed:i},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",le,[(0,t.bF)(_,{onClick:l[1]||(l[1]=e=>d.value=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("关闭弹窗")])),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(k,{name:"1"},{title:(0,t.k6)((()=>[G])),default:(0,t.k6)((()=>[(0,t.bF)(v,{direction:"vertical",column:3,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"订单编号"},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.orderNo),1)])),_:1})])),_:1}),(0,t.bF)(n,{label:"订单状态"},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(h(r.value.orderStatus,(0,u.R1)(m))),1)])),_:1})])),_:1}),(0,t.bF)(n,{label:"订单金额(元)"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,u.R1)(B.jq)(r.value.orderAmount,2)),1)])),_:1}),(0,t.bF)(n,{label:"订单来源"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(h(r.value.deviceSource,(0,u.R1)(b))),1)])),_:1}),(0,t.bF)(n,{label:"下单时间"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,u.R1)(B.i$)(r.value.createTime,"YYYY-MM-DD HH:mm:ss")),1)])),_:1}),(0,t.bF)(n,{label:"下单用户ID"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.buyerId),1)])),_:1}),(0,t.bF)(n,{label:"下单用户名称"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.buyerName),1)])),_:1}),(0,t.bF)(n,{label:"下单用户手机号"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.buyerMobileNumber),1)])),_:1}),(0,t.bF)(n,{label:"收货人姓名"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.receiver),1)])),_:1}),(0,t.bF)(n,{label:"收货人手机号"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.receiverMobileNumber),1)])),_:1}),(0,t.bF)(n,{label:"收货地址",span:3},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.receiverAddress),1)])),_:1}),(0,t.bF)(n,{label:"用户备注",span:3},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.remark||"-"),1)])),_:1})])),_:1})])),_:1}),(0,t.bF)(k,{name:"2"},{title:(0,t.k6)((()=>[$])),default:(0,t.k6)((()=>[r.value.payInfo?((0,t.uX)(),(0,t.Wv)(v,{key:0,direction:"vertical",column:2,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"支付流水号"},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value.payInfo.payNo),1)])),_:1})])),_:1}),(0,t.bF)(n,{label:"支付金额(元)"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,u.R1)(B.jq)(r.value.payInfo.payAmount,2)),1)])),_:1}),(0,t.bF)(n,{label:"支付时间"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,u.R1)(B.i$)(r.value.payInfo.payTime,"YYYY-MM-DD HH:mm:ss")),1)])),_:1}),(0,t.bF)(n,{label:"支付方式"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(h(r.value.payInfo.payWay,(0,u.R1)(f))),1)])),_:1})])),_:1})):((0,t.uX)(),(0,t.Wv)(a,{key:1,type:"info"},{default:(0,t.k6)((()=>[(0,t.eW)("无支付信息")])),_:1}))])),_:1}),(0,t.bF)(k,{name:"3"},{title:(0,t.k6)((()=>[z])),default:(0,t.k6)((()=>[(0,t.bF)(y,{isShowPagination:!1,props:{maxHeight:250},columns:c,query:()=>r.value.goodsList},null,8,["query"])])),_:1}),(0,t.bF)(k,{name:"4"},{title:(0,t.k6)((()=>[J])),default:(0,t.k6)((()=>[(0,t.bF)(y,{isShowPagination:!1,props:{maxHeight:250},columns:p,query:()=>r.value.couponList},null,8,["query"])])),_:1}),(0,t.bF)(k,{name:"5"},{title:(0,t.k6)((()=>[Z])),default:(0,t.k6)((()=>[r.value.logisticsList&&0!==r.value.logisticsList.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(a,{key:0,type:"info"},{default:(0,t.k6)((()=>[(0,t.eW)("无物流信息")])),_:1})),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.value.logisticsList,((e,l)=>((0,t.uX)(),(0,t.Wv)(v,{key:e.logisticsNumber,title:"包裹"+(l+1),direction:"vertical",column:2,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"物流单号"},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.logisticsNumber),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(n,{label:"物流公司"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.companyName),1)])),_:2},1024),(0,t.bF)(n,{label:"商品列表",span:2},{default:(0,t.k6)((()=>[(0,t.bF)(y,{isShowPagination:!1,props:{maxHeight:100},columns:c.filter((e=>["name","img","specs","code","quantity"].includes(e.prop))),query:()=>e.goodsList},null,8,["columns","query"])])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1}),(0,t.bF)(k,{name:"6"},{title:(0,t.k6)((()=>[ee])),default:(0,t.k6)((()=>[r.value.afterSalesList&&0!==r.value.afterSalesList.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(a,{key:0,type:"info"},{default:(0,t.k6)((()=>[(0,t.eW)("无售后信息")])),_:1})),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.value.afterSalesList,((e,l)=>((0,t.uX)(),(0,t.Wv)(v,{key:l,title:"售后"+(l+1),direction:"vertical",column:2,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"售后类型"},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.type),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(n,{label:"提交售后时间"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,u.R1)(B.i$)(e.createTime,"YYYY-MM-DD HH:mm:ss")),1)])),_:2},1024),(0,t.bF)(n,{label:"涉及物流单号"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.logisticsNumbers),1)])),_:2},1024),(0,t.bF)(n,{label:"退款金额"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.refundAmount&&(0,u.R1)(B.jq)(e.refundAmount,2)||"-"),1)])),_:2},1024),(0,t.bF)(n,{label:"售后原因"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.reason||"-"),1)])),_:2},1024),(0,t.bF)(n,{label:"用户备注"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.remark||"-"),1)])),_:2},1024),(0,t.bF)(n,{label:"涉及商品列表",span:2},{default:(0,t.k6)((()=>[(0,t.bF)(y,{isShowPagination:!1,props:{maxHeight:100},columns:c.filter((e=>["name","img","specs","code","quantity"].includes(e.prop))),query:()=>e.goodsList},null,8,["columns","query"])])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])}}});const te=(0,j.A)(ae,[["__scopeId","data-v-6f555546"]]);var oe=te,ue=a(141),ne=a(4094);const se=e=>((0,t.Qi)("data-v-bd6baa1e"),e=e(),(0,t.jt)(),e),ie={class:"header-content"},de=se((()=>(0,t.Lk)("div",{class:"title-bar"},"筛选条件",-1))),re={class:"header-content"},ce=se((()=>(0,t.Lk)("div",{class:"title-bar"},"导入字段",-1))),pe={key:0,class:"loading-text"},ve={key:1,class:"empty-text"},be={key:2,class:"checkbox-list-wrapper"},me=["title"],fe={key:0,class:"virtually-progress-panel"},he=se((()=>(0,t.Lk)("div",{class:"state-text"},"正在导出数据，请耐心等待...",-1)));var ke=(0,t.pM)({__name:"excel-export-dialog",props:{isShow:{type:Boolean},searchFields:{type:Array,default:function(){return[]}},searchFormValue:{type:Object,default(){return{}}},tableColumns:{type:Array,default(){return[]}}},emits:["update:isShow"],setup(e,{emit:l}){const n=e,s=l,d=(0,u.KR)(!1),r=(0,u.KR)(["1","2"]),c=(0,u.KR)(!1),p=(0,u.KR)(),v=(0,u.KR)(!1),b=(0,u.KR)(!1),m=(0,u.KR)(""),f=(0,u.KR)(!0),h=(0,u.KR)(!1),g=(0,u.KR)([]),_=(0,u.Kh)({isShow:!1,isLoading:!1}),C=(0,t.EW)((()=>g.value.filter((e=>e.selected)))),w=(0,t.EW)((()=>g.value.filter((e=>e.disabled)))),F=function(){!c.value&&p.value&&p.value.changeFormFields((function(e){e.forEach((e=>{e.props&&(e.value=(0,y.bf)(n.searchFormValue,e.name,null))}))}))},x=function(){g.value=[],n.tableColumns.forEach((e=>{!e.prop||e.type&&["index","selection","expand","action"].includes(e.type)||g.value.push({name:e.label||"-",key:e.prop,disabled:!!e.fixed,isShow:!0,selected:!0})}))},S=function(){s("update:isShow",!1)},L=function(e,l){if(l)g.value.forEach((l=>{l.isShow&&!l.disabled&&(l.selected=e)})),h.value=!e&&g.value.some((e=>e.selected));else{const e=g.value.filter((e=>e.selected&&e.isShow)).length,l=g.value.filter((e=>e.isShow)).length;f.value=l>0&&e===l,h.value=e>0&&e<l}},W=(0,y.sg)((function(){g.value.forEach((e=>{e.isShow=e.name.includes(m.value)})),L(f.value,!1),v.value=!1,b.value=g.value.every((e=>!e.isShow))}),200),R=function(){v.value=!0,W()},K=function(){_.isLoading||(_.isShow=!0,_.isLoading=!0,setTimeout((async()=>{await ue.A.download({type:"a",url:a(3327),fileName:"订单数据导出("+(0,B.i$)(Date.now())+").xlsx"}),_.isLoading=!1}),parseInt((1e3*Math.random()*10).toFixed(0),10)))};return(0,t.wB)((()=>n.tableColumns),(()=>x()),{immediate:!0}),(0,t.wB)((()=>n.isShow),(e=>{e&&(d.value=e,F())})),(l,a)=>{const n=(0,t.g2)("el-checkbox"),s=(0,t.g2)("search-form"),y=(0,t.g2)("el-collapse-item"),x=(0,t.g2)("el-input"),W=(0,t.g2)("el-col"),E=(0,t.g2)("el-row"),V=(0,t.g2)("el-collapse"),A=(0,t.g2)("el-button"),X=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(X,{modelValue:d.value,"onUpdate:modelValue":a[9]||(a[9]=e=>d.value=e),title:"订单Excel大数据导出",class:"common-dialog",width:"800px",onClosed:S},{footer:(0,t.k6)((()=>[(0,t.bF)(A,{onClick:a[8]||(a[8]=e=>d.value=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1}),(0,t.bF)(A,{disabled:C.value.length<=w.value.length,type:"primary",loading:_.isLoading,onClick:K},{default:(0,t.k6)((()=>[(0,t.eW)("确定导出")])),_:1},8,["disabled","loading"])])),default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(V,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value=e),style:{border:"0px"}},{default:(0,t.k6)((()=>[(0,t.bF)(y,{name:"1"},{title:(0,t.k6)((()=>[(0,t.Lk)("div",ie,[de,(0,t.bF)(n,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),onClick:a[1]||(a[1]=(0,k.D$)((()=>{}),["stop"]))},{default:(0,t.k6)((()=>[(0,t.eW)("记住当前筛选项的值")])),_:1},8,["modelValue"])])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref_key:"searchFormRef",ref:p,fields:e.searchFields,isShowSearchButton:!1,isShowCollapse:!1,onFieldsChange:F},null,8,["fields"])])),_:1}),(0,t.bF)(y,{name:"2"},{title:(0,t.k6)((()=>[(0,t.Lk)("div",re,[ce,(0,t.bF)(x,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),modelModifiers:{trim:!0},onClick:a[3]||(a[3]=(0,k.D$)((()=>{}),["stop"])),style:{width:"360px"},clearable:"",placeholder:"搜索字段","prefix-icon":(0,u.R1)(i.vji),onInput:R},null,8,["modelValue","prefix-icon"])])])),default:(0,t.k6)((()=>[v.value?((0,t.uX)(),(0,t.CE)("div",pe,"数据匹配中...")):b.value?((0,t.uX)(),(0,t.CE)("div",ve,"未匹配到数据")):((0,t.uX)(),(0,t.CE)("div",be,[(0,t.bF)(E,null,{default:(0,t.k6)((()=>[(0,t.bF)(W,{span:24},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=e=>f.value=e),indeterminate:h.value,label:"全选",onChange:a[5]||(a[5]=e=>L(f.value,!0))},null,8,["modelValue","indeterminate"])])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(g.value,(e=>(0,t.bo)(((0,t.uX)(),(0,t.Wv)(W,{key:e.key,span:8},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l,disabled:e.disabled,onChange:l=>L(e.selected,!1)},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{class:"checkbox-label-text",title:e.name},(0,o.v_)(e.name),9,me)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1024)),[[k.aG,e.isShow]]))),128))])),_:1})]))])),_:1})])),_:1},8,["modelValue"]),[[k.aG,!_.isShow]]),_.isShow?((0,t.uX)(),(0,t.CE)("div",fe,[(0,t.bF)(ne.A,{finished:!_.isLoading,onAfterFinished:a[7]||(a[7]=e=>_.isShow=!1)},{default:(0,t.k6)((()=>[he])),_:1},8,["finished"])])):(0,t.Q3)("",!0)])),_:1},8,["modelValue"])}}});const ye=(0,j.A)(ke,[["__scopeId","data-v-bd6baa1e"]]);var ge=ye,_e=(0,t.pM)({__name:"add-or-update-form-dialog",props:{isShow:{type:Boolean,default:!1}},emits:["update:isShow","refresh"],setup(e,{emit:l}){const a=l,o=(0,u.KR)(),n=(0,u.Kh)({columns:2,fields:[{name:"orderNo",label:"订单号",rules:[{required:!0,message:"请填写订单号"}]},{name:"receiveMan",label:"收货人",rules:[{required:!0,message:"请填写收货人"}]},{name:"price",label:"价格"},{name:"receiveManTel",label:"收货人手机号"},{name:"sendMan",label:"购买人"},{name:"fromAbroad",label:"是否跨境",type:"select",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"tags",label:"标签",props:{placeholder:"标签，多个用'|'分割"}},{name:"sex",label:"性别",type:"radio",data:[{label:"男",value:1},{label:"女",value:2}]},{name:"activeStatus",label:"状态",type:"select",data:[{label:"激活",value:!0},{label:"冻结",value:!1}]},{name:"imgs",label:"图片",type:"imgUpload",span:24,props:{uploadProps:{multiple:!0}}},{name:"remark",label:"备注",span:24,type:"webEditor"}]}),i=(0,u.KR)([{text:"取消"},{text:"保存",props:{type:"primary"},click:async function(e){await(o.value?.validate()),await v.addOrder(e),s.nk.success("操作成功"),a("update:isShow",!1),a("refresh")}}]);return(l,u)=>{const s=(0,t.g2)("dialog-form");return(0,t.uX)(),(0,t.Wv)(s,{ref_key:"dialogFormRef",ref:o,isShow:e.isShow,buttons:i.value,inputFormProps:n,dialogProps:{title:"新增订单数据",width:"800px"},onClose:u[0]||(u[0]=e=>a("update:isShow",!1))},null,8,["isShow","buttons","inputFormProps"])}}});const Ce=_e;var we=Ce;const Fe=e=>((0,t.Qi)("data-v-3762aa76"),e=e(),(0,t.jt)(),e),xe={class:"order-status-header"},Se=Fe((()=>(0,t.Lk)("div",{class:"tips-popover"},[(0,t.Lk)("div",{class:"title-text"},"订单状态说明"),(0,t.Lk)("div",{class:"subtitle-text"},"1.订单取消"),(0,t.Lk)("div",{class:"contents-text"},"订单因为某些原因被取消，比如用户取消订单或者商家无法完成订单。"),(0,t.Lk)("div",{class:"subtitle-text"},"2.售后中"),(0,t.Lk)("div",{class:"contents-text"},"用户在付款后发货前申请退款，或商家发货后用户申请退款、换货，都会产生这种订单状态。"),(0,t.Lk)("div",{class:"subtitle-text"},"3.退款中"),(0,t.Lk)("div",{class:"contents-text"},"当买家在待发货的时候，选择了订单中某个商品进行退款，此时订单进入状态“退款中”。"),(0,t.Lk)("div",{class:"subtitle-text"},"4.已退款"),(0,t.Lk)("div",{class:"contents-text"},"买家已经申请了售后服务退款，并且卖家已经同意退款，款项已经成功退回到买家的账户中。"),(0,t.Lk)("div",{class:"subtitle-text"},"5.待付款"),(0,t.Lk)("div",{class:"contents-text"},"用户刚提交订单，尚未付款，等待用户支付。由于待付款状态会锁定存，所以一般会设置超时自动取消功能。"),(0,t.Lk)("div",{class:"subtitle-text"},"6.待发货"),(0,t.Lk)("div",{class:"contents-text"},"用户付款之后，等待仓库出仓发货。"),(0,t.Lk)("div",{class:"subtitle-text"},"7.已发货"),(0,t.Lk)("div",{class:"contents-text"},"仓库已经将商品发出，用户可以通过物流信息了解商品的运输情况。"),(0,t.Lk)("div",{class:"subtitle-text"},"8.已签收"),(0,t.Lk)("div",{class:"contents-text"},"商品已经被用户签收，订单完成。"),(0,t.Lk)("div",{class:"subtitle-text"},"9.交易关闭"),(0,t.Lk)("div",{class:"contents-text"},"当售后完成后的订单状态。“已取消”的订单状态可以合并到“交易关闭”中。")],-1)));var Le=(0,t.pM)({__name:"index",setup(e){const l=(0,u.KR)(),a=(0,u.KR)(!1),r=(0,u.KR)(!1),c=(0,u.KR)(!1),p=(0,u.KR)(!1),b=(0,u.KR)(),m=(0,u.KR)({}),f=(0,u.Kh)({allCount:0,pendingCount:0,paidCount:0,deliveredCount:0,completedCount:0,cancelledCount:0,refundedCount:0}),k=async function(){await l.value.query()},y=function(e){l.value?.changeButtons((l=>{const a=l.find((e=>e.handleCode===d.Cj.BATCHCANCEL));a&&(a.props||(a.props={}),a.props.disabled=0===e.length||e.some((e=>10!==e.orderStatus)))}))},g=function(e,{handleCode:l}){d.Cj.CREATE===l?p.value=!0:d.Cj.QUERY===l?(b.value=null,a.value=!0):d.Cj.SEARCH===l&&(b.value=e,r.value=!0)},_=async function(e,{handleCode:l}){let a="确定要取消当前选中的订单信息吗?";l===d.Cj.CANCEL?e=[e]:a="确定要取消当前选中的"+e.length+"个订单信息吗?",await n.s.confirm(a,"信息确认",{customClass:"custom-confirm",confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await v.batchUpdateOrderStatus({orderNoList:e.map((e=>e.orderNo)),status:10}),(0,s.nk)({customClass:"custom-message",message:"操作成功",type:"success"}),k()},C=function(){m.value=l.value.getSearchedValue(),c.value=!0},w=async function(e){l.value||await(0,t.dY)(),l.value?.updateTableColumnsShowStatus(e)},F=(0,u.Kh)(h({showDialogHandle:g,excelExportHandle:C,cancelOrderHandle:_,orertReportData:f}));return(e,n)=>{const s=(0,t.g2)("el-radio-button"),d=(0,t.g2)("el-radio-group"),v=(0,t.g2)("el-icon"),h=(0,t.g2)("el-popover"),g=(0,t.g2)("search-page");return(0,t.uX)(),(0,t.Wv)(g,(0,t.v6)(F,{ref_key:"searchPageRef",ref:l,onSelectRowsChange:y}),{dataTable_orderNo:(0,t.k6)((({row:e})=>[(0,t.bF)(U,{value:e.orderNo},null,8,["value"])])),actionBar_default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:F.dataTableProps.filters.orderStatus,"onUpdate:modelValue":n[0]||(n[0]=e=>F.dataTableProps.filters.orderStatus=e),onChange:k},{default:(0,t.k6)((()=>[(0,t.bF)(s,{value:""},{default:(0,t.k6)((()=>[(0,t.eW)("全部订单("+(0,o.v_)(f.allCount)+")",1)])),_:1}),(0,t.bF)(s,{value:10},{default:(0,t.k6)((()=>[(0,t.eW)("待付款("+(0,o.v_)(f.pendingCount)+")",1)])),_:1}),(0,t.bF)(s,{value:20},{default:(0,t.k6)((()=>[(0,t.eW)("待发货("+(0,o.v_)(f.paidCount)+")",1)])),_:1}),(0,t.bF)(s,{value:30},{default:(0,t.k6)((()=>[(0,t.eW)("已发货("+(0,o.v_)(f.deliveredCount)+")",1)])),_:1}),(0,t.bF)(s,{value:40},{default:(0,t.k6)((()=>[(0,t.eW)("已签收("+(0,o.v_)(f.completedCount)+")",1)])),_:1}),(0,t.bF)(s,{value:-1},{default:(0,t.k6)((()=>[(0,t.eW)("已取消("+(0,o.v_)(f.cancelledCount)+")",1)])),_:1}),(0,t.bF)(s,{value:-5},{default:(0,t.k6)((()=>[(0,t.eW)("已退款("+(0,o.v_)(f.refundedCount)+")",1)])),_:1})])),_:1},8,["modelValue"])])),dataTable_orderStatusHeader:(0,t.k6)((()=>[(0,t.Lk)("div",xe,[(0,t.eW)(" 订单状态 "),(0,t.bF)(h,{width:"450",trigger:"hover","popper-style":"padding: 0px"},{reference:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(i.lOC))])),_:1})])),default:(0,t.k6)((()=>[Se])),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(q,{"is-show":a.value,tableColumns:F.dataTableProps.columns,localStorageKey:"orderListCustomerColumns",onClose:n[1]||(n[1]=e=>a.value=!1),onSave:w},null,8,["is-show","tableColumns"]),r.value?((0,t.uX)(),(0,t.Wv)(oe,{key:0,row:b.value,onClose:n[2]||(n[2]=e=>r.value=!1)},null,8,["row"])):(0,t.Q3)("",!0),(0,t.bF)(ge,{isShow:c.value,searchFields:F.searchFormProps.fields,tableColumns:F.dataTableProps.columns,searchFormValue:m.value,onClose:n[3]||(n[3]=e=>c.value=!1)},null,8,["isShow","searchFields","tableColumns","searchFormValue"]),p.value?((0,t.uX)(),(0,t.Wv)(we,{key:1,isShow:p.value,"onUpdate:isShow":n[4]||(n[4]=e=>p.value=e),onRefresh:k},null,8,["isShow"])):(0,t.Q3)("",!0)])),_:1},16)}}});const We=(0,j.A)(Le,[["__scopeId","data-v-3762aa76"]]);var Re=We},3327:function(e,l,a){e.exports=a.p+"build/file/批量新增菜单模板.e5d9c722.xlsx"}}]);
//# sourceMappingURL=718.62913c42.js.map