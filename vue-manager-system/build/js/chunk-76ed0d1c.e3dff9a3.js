(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76ed0d1c"],{"0871":function(t,e,o){"use strict";(function(t){o("c975"),o("baa5"),o("a434"),o("d3b7"),o("ac1f"),o("5319");e["a"]={data:function(){return{handleButtons:[{action:"refresh",label:"刷新",click:this.refresh}],dataTable:{query:t.api.system.queryMenuPermissionList,queryDataHandle:function(t){return{items:t}},dbClick:this.gotoUpdate,hasPagination:!1,table:{rowKey:"permissions",treeProps:{children:"items"}},columns:[{prop:"name",label:"名称",formatter:this.nameFormatter},{prop:"permissions",label:"权限值"},{prop:"type",label:"类型",type:"enum",list:[{name:"菜单",key:"menu"},{name:"按钮",key:"button"}]},{slot:"icon",label:"图标",align:"center",width:"80px"},{prop:"route",label:"路由地址"},{type:"action",label:"操作",width:"220px",buttons:this.generatorActionButtons}]},icons:["calendar","clock-o","envelope","cog","edit","email","system-manage"],updateMenuDialogForm:{isShow:!1,dialog:{title:"修改菜单信息"},permissionsPrefix:null,fields:[{name:"name",label:"ID值",rules:[{required:!0,message:"ID值不能为空"}]},{name:"displayName",label:"名称",rules:[{required:!0,message:"名称不能为空"}]},{name:"permissions",slot:"permissions",label:"权限值",rules:[{required:!0,message:"权限值不能为空"}]},{name:"route",label:"路由"},{name:"icon",slot:"icon",label:"图标"}],submitForm:this.updateMenu},addButtonsDialog:{isShow:!1,permissionsPrefix:null,formInput:[]}}},methods:{init:function(){},delete:function(t){this.$confirm("确定要删除"+(t.displayName?t.displayName+"菜单":t.label+"按钮")+"吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Promise.resolve(!0)})).catch((function(){}))},generatorActionButtons:function(t){var e=[];return"menu"==t.type&&(e=[{label:"新增按钮",click:this.gotoAddButtons},{label:"新增子菜单",click:this.gotoAddMenus}]),e.push({label:"编辑",click:this.gotoUpdate},{label:"删除",click:this.delete}),e},nameFormatter:function(t,e,o,s){return t.displayName||t.label},gotoAddButtons:function(t){this.addButtonsDialog.formInput=[{label:"",permissions:"",type:"button"}],this.addButtonsDialog.isShow=!0,this.addButtonsDialog.permissionsPrefix=t.permissions+"."},gotoAddButton:function(){this.addButtonsDialog.formInput.push({label:"",permissions:"",type:"button"})},moveButton:function(t,e){e>0?(this.addButtonsDialog.formInput.splice(t+e+1,0,this.addButtonsDialog.formInput[t]),this.addButtonsDialog.formInput.splice(t,1)):e<0&&(this.addButtonsDialog.formInput.splice(t+e,0,this.addButtonsDialog.formInput[t]),this.addButtonsDialog.formInput.splice(t+1,1))},gotoAddMenus:function(t){this.$refs["update-menu-dialog-form"].setFieldsValue({route:'{"name": ""}',type:"menu"},["type"]),this.updateMenuDialogForm.isShow=!0,this.updateMenuDialogForm.permissionsPrefix=t.permissions+".",this.updateMenuDialogForm.dialog.title="新增"+t.displayName+"的子菜单信息:"},gotoUpdate:function(t){t.permissions&&-1!=t.permissions.indexOf(".")?(this.updateMenuDialogForm.permissionsPrefix=t.permissions.substr(0,t.permissions.lastIndexOf(".")+1),t=Object.assign({},t,{permissions:t.permissions.replace(this.updateMenuDialogForm.permissionsPrefix,"")})):this.updateMenuDialogForm.permissionsPrefix="",this.$refs["update-menu-dialog-form"].setFieldsValue(t,["type"]),this.updateMenuDialogForm.isShow=!0,"menu"==t.type?(this.updateMenuDialogForm.fields=[{name:"name",label:"ID值",rules:[{required:!0,message:"ID值不能为空"}]},{name:"displayName",label:"名称",rules:[{required:!0,message:"名称不能为空"}]},{name:"permissions",slot:"permissions",label:"权限值",rules:[{required:!0,message:"权限值不能为空"}]},{name:"route",label:"路由"},{name:"icon",slot:"icon",label:"图标"}],this.updateMenuDialogForm.dialog.title="修改菜单信息:"+t.displayName):"button"==t.type&&(this.updateMenuDialogForm.fields=[{name:"label",label:"操作内容",rules:[{required:!0,message:"操作内容不能为空"}]},{name:"permissions",slot:"permissions",label:"权限值",rules:[{required:!0,message:"权限值不能为空"}]}],this.updateMenuDialogForm.dialog.title="修改按钮信息:"+t.label)},updateMenu:function(t){return new Promise((function(e,o){console.info(t),e(!0)}))},addButtons:function(){var t=this;this.$refs["add-buttons-form"].validate((function(e){e&&(console.info(t.addButtonsDialog.formInput),t.addButtonsDialog.isShow=!1)}))}}}}).call(this,o("28f0")["default"])},1885:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu-manager"},[o("action-bar",{attrs:{buttons:t.handleButtons}}),o("data-table",t._b({scopedSlots:t._u([{key:"icon",fn:function(e){var s=e.row;return[s.icon?o("svg-icon",{staticStyle:{"font-size":"20px"},attrs:{value:s.icon}}):t._e()]}}])},"data-table",t.dataTable,!1)),o("dialog-form",t._b({ref:"update-menu-dialog-form",attrs:{isShow:t.updateMenuDialogForm.isShow},on:{"update:isShow":function(e){return t.$set(t.updateMenuDialogForm,"isShow",e)},"update:is-show":function(e){return t.$set(t.updateMenuDialogForm,"isShow",e)}},scopedSlots:t._u([{key:"permissions",fn:function(e){var s=e.formInput;return[o("el-input",{attrs:{placeholder:"请输入权限值"},model:{value:s.permissions,callback:function(e){t.$set(s,"permissions",e)},expression:"formInput.permissions"}},[t.updateMenuDialogForm.permissionsPrefix?o("template",{slot:"prepend"},[t._v(t._s(t.updateMenuDialogForm.permissionsPrefix))]):t._e()],2)]}},{key:"icon",fn:function(e){var s=e.formInput;return[o("el-select",{attrs:{placeholder:"请选择"},model:{value:s.icon,callback:function(e){t.$set(s,"icon",e)},expression:"formInput.icon"}},t._l(t.icons,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e}},[o("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e))]),o("svg-icon",{staticStyle:{"font-size":"20px",float:"right"},attrs:{value:e}})],1)})),1),s.icon?o("svg-icon",{staticStyle:{"font-size":"20px","margin-left":"20px"},attrs:{value:s.icon}}):t._e()]}}])},"dialog-form",t.updateMenuDialogForm,!1)),o("el-dialog",{attrs:{title:"新增操作按钮",visible:t.addButtonsDialog.isShow,width:"50%"},on:{"update:visible":function(e){return t.$set(t.addButtonsDialog,"isShow",e)}}},[o("el-form",{ref:"add-buttons-form",attrs:{model:t.addButtonsDialog,"label-width":"0px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addButtonsDialog.formInput,border:""}},[o("el-table-column",{attrs:{label:"操作内容"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.$index;return[o("div",{staticClass:"form-column"},[o("el-form-item",{attrs:{prop:"formInput."+s+".label",rules:{required:!0,message:"请输入操作内容"}}},[o("el-input",{attrs:{placeholder:"请输入按钮操作内容"},model:{value:t.addButtonsDialog.formInput[s].label,callback:function(e){t.$set(t.addButtonsDialog.formInput[s],"label",e)},expression:"addButtonsDialog.formInput[$index].label"}})],1)],1)]}}])}),o("el-table-column",{attrs:{label:"权限","class-name":"form-column"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.$index;return[o("div",{staticClass:"form-column"},[o("el-form-item",{attrs:{prop:"formInput."+s+".permissions",rules:{required:!0,message:"请输入操作内容"}}},[o("el-input",{attrs:{placeholder:"请输入权限值"},model:{value:t.addButtonsDialog.formInput[s].permissions,callback:function(e){t.$set(t.addButtonsDialog.formInput[s],"permissions",e)},expression:"addButtonsDialog.formInput[$index].permissions"}},[o("template",{slot:"prepend"},[t._v(t._s(t.addButtonsDialog.permissionsPrefix))])],2)],1)],1)]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.$index;return[0!=s?o("el-button",{attrs:{size:"small"},on:{click:function(e){return t.moveButton(s,-1)}}},[t._v("上移")]):t._e(),s!=t.addButtonsDialog.formInput.length-1?o("el-button",{attrs:{size:"small"},on:{click:function(e){return t.moveButton(s,1)}}},[t._v("下移")]):o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.gotoAddButton}},[t._v("添加")])]}}])})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addButtonsDialog.isShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addButtons}},[t._v("确 定")])],1)],1)],1)},n=[],i=o("0871"),a=i["a"],l=(o("bb96"),o("2877")),r=Object(l["a"])(a,s,n,!1,null,"1d42c4f8",null);e["default"]=r.exports},"5d08":function(t,e,o){},baa5:function(t,e,o){var s=o("23e7"),n=o("e58c");s({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},bb96:function(t,e,o){"use strict";var s=o("5d08"),n=o.n(s);n.a},e58c:function(t,e,o){"use strict";var s=o("fc6a"),n=o("a691"),i=o("50c4"),a=o("a640"),l=o("ae40"),r=Math.min,u=[].lastIndexOf,d=!!u&&1/[1].lastIndexOf(1,-0)<0,m=a("lastIndexOf"),p=l("indexOf",{ACCESSORS:!0,1:0}),c=d||!m||!p;t.exports=c?function(t){if(d)return u.apply(this,arguments)||0;var e=s(this),o=i(e.length),a=o-1;for(arguments.length>1&&(a=r(a,n(arguments[1]))),a<0&&(a=o+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:u}}]);
//# sourceMappingURL=chunk-76ed0d1c.e3dff9a3.js.map