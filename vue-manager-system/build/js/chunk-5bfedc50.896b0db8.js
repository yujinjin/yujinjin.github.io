(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bfedc50"],{"0904":function(e,t,a){"use strict";(function(e){a("b0c0"),a("d3b7"),a("96cf");var r=a("1da1");t["a"]={data:function(){return{queryFields:[{name:"filter",label:"系统用户"}],handleButtons:[{action:"add",label:"新增",click:this.gotoAdd},{action:"delete",label:"删除",click:this.delete},{action:"refresh",label:"刷新",click:this.refresh}],dataTable:{query:e.api.system.queryUserList,dbClick:this.gotoUpdate,columns:[{type:"selection"},{type:"action",label:"操作",width:"90px",align:"center",buttons:[{label:"编辑",click:this.gotoUpdate},{label:"改密码",click:this.gotoUpdatePassword}]},{prop:"name",label:"姓名"},{prop:"loginName",label:"登录名"},{prop:"mobile",label:"手机号"},{prop:"email",label:"邮箱"},{prop:"state",label:"状态",type:"enum",list:"ACTIVE_FROZEN",click:this.changeStatus,tips:"【{0}】该用户"},{prop:"departmentName",label:"部门",width:"70px"},{prop:"lastLoginTime",label:"最后登录",type:"datetime"},{prop:"createTime",label:"创建时间",type:"datetime"}]},userDialog:{title:"",isShow:!1,roleList:[],departmentList:[],formInput:{id:null,name:null,loginName:null,departmentId:null,mobile:null,email:null,password:null,passwordRepeat:null,roles:[]},passwordRule:[{required:!0,validator:this.passwordValidator,trigger:"blur"}]},updatePasswordDialogForm:{dialog:{title:"修改登录密码"},formInput:{},isShow:!1,form:{rules:{passwordRepeat:[{required:!0,message:"请确认新密码"},{validator:this.passwordValidator,trigger:"blur"}]}},submitForm:this.updatePassword,fields:[{name:"password",value:"",label:"新密码",rules:[{required:!0,message:"新密码不能为空"},{min:6,max:20,message:"长度在 6 到20 个字符",trigger:"blur"}],option:{type:"password",style:{width:"250px"}}},{name:"passwordRepeat",value:"",label:"确认新密码",option:{type:"password",style:{width:"250px"}}}]}}},created:function(){this.init()},methods:{init:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.api.system.queryRoleList();case 2:return r=a.sent,l=r.items,t.userDialog.roleList=l,a.next=7,e.api.system.queryDepartmentList();case 7:t.userDialog.departmentList=a.sent;case 8:case"end":return a.stop()}}),a)})))()},gotoAdd:function(){this.userDialog.isShow=!0,this.userDialog.title="新增用户信息",Object.assign(this.userDialog.formInput,{id:null,name:null,loginName:null,departmentId:null,mobile:null,email:null,password:null,passwordRepeat:null,roles:[]})},gotoUpdate:function(e){this.userDialog.isShow=!0,this.userDialog.title="修改用户信息:"+e.name,Object.assign(this.userDialog.formInput,e,{roles:[parseInt(10*Math.random(),10)+1],departmentId:parseInt(20*Math.random(),10)+1})},gotoUpdatePassword:function(e){this.updatePasswordDialogForm.isShow=!0,this.updatePasswordDialogForm.dialog.title="修改用户密码:"+e.name},delete:function(){this.preBatchDelete((function(e){return console.info(e),Promise.resolve(!0)}))},save:function(){var e=this;this.$refs["user-dialog-form"].validate((function(t){t&&(e.userDialog.isShow=!1)}))},changeStatus:function(e){return Promise.resolve(!0)},departmentSelectChange:function(e){this.userDialog.formInput.departmentId=e.id},updatePassword:function(e){return new Promise((function(t,a){console.info(e),t(!0)}))},passwordValidator:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!==this.userDialog.formInput.password?a(new Error("两次输入密码不一致!")):a()}}}}).call(this,a("28f0")["default"])},a7e5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-list"},[a("search-form",{attrs:{fields:e.queryFields},on:{search:e.search,change:e.filterChange}}),a("action-bar",{attrs:{buttons:e.handleButtons}}),a("data-table",e._b({attrs:{filters:e.filters,"select-rows":e.selectRows},on:{"update:selectRows":function(t){e.selectRows=t},"update:select-rows":function(t){e.selectRows=t}}},"data-table",e.dataTable,!1)),a("dialog-form",e._b({attrs:{isShow:e.updatePasswordDialogForm.isShow},on:{"update:isShow":function(t){return e.$set(e.updatePasswordDialogForm,"isShow",t)},"update:is-show":function(t){return e.$set(e.updatePasswordDialogForm,"isShow",t)},"input-change":function(t){e.updatePasswordDialogForm.formInput=arguments[0]}}},"dialog-form",e.updatePasswordDialogForm,!1)),a("el-dialog",{attrs:{title:e.userDialog.title,"close-on-click-modal":!1,visible:e.userDialog.isShow,width:"50%"},on:{"update:visible":function(t){return e.$set(e.userDialog,"isShow",t)}}},[a("el-form",{ref:"user-dialog-form",staticClass:"user-dialog-form",attrs:{model:e.userDialog.formInput,"label-width":"100px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("el-form-item",{attrs:{label:"姓名：",prop:"name",rules:{required:!0,message:"请输入姓名"}}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.userDialog.formInput.name,callback:function(t){e.$set(e.userDialog.formInput,"name",t)},expression:"userDialog.formInput.name"}})],1),a("el-form-item",{attrs:{label:"登录名：",prop:"loginName",rules:{required:!0,message:"请输入登录名"}}},[a("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:e.userDialog.formInput.loginName,callback:function(t){e.$set(e.userDialog.formInput,"loginName",t)},expression:"userDialog.formInput.loginName"}})],1),a("el-form-item",{attrs:{label:"手机号：",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:e.userDialog.formInput.mobile,callback:function(t){e.$set(e.userDialog.formInput,"mobile",t)},expression:"userDialog.formInput.mobile"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email",rules:{required:!0,type:"email",message:"请输入邮箱"}}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.userDialog.formInput.email,callback:function(t){e.$set(e.userDialog.formInput,"email",t)},expression:"userDialog.formInput.email"}})],1),e.userDialog.formInput.id?e._e():a("el-form-item",{attrs:{prop:"password",label:"密码：","auto-complete":"off",rules:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"大于或等于6位",trigger:"change"}]}},[a("el-input",{attrs:{type:"password"},model:{value:e.userDialog.formInput.password,callback:function(t){e.$set(e.userDialog.formInput,"password",t)},expression:"userDialog.formInput.password"}})],1),e.userDialog.formInput.id?e._e():a("el-form-item",{attrs:{prop:"passwordRepeat",label:"确认密码：","auto-complete":"off",rules:e.userDialog.passwordRule}},[a("el-input",{attrs:{type:"password"},model:{value:e.userDialog.formInput.passwordRepeat,callback:function(t){e.$set(e.userDialog.formInput,"passwordRepeat",t)},expression:"userDialog.formInput.passwordRepeat"}})],1),a("el-form-item",{attrs:{prop:"roles",label:"角色：",rules:{required:!0,message:"请选择角色"}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.userDialog.formInput.roles,callback:function(t){e.$set(e.userDialog.formInput,"roles",t)},expression:"userDialog.formInput.roles"}},e._l(e.userDialog.roleList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-tab-pane",{attrs:{label:"部门信息"}},[a("el-table",{attrs:{data:e.userDialog.departmentList,height:"300px","highlight-current-row":"","row-key":"id","default-expand-all":"","tree-props":{children:"children"},border:""},on:{"current-change":e.departmentSelectChange}},[a("el-table-column",{attrs:{type:"index",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.userDialog.formInput.departmentId,callback:function(t){e.$set(e.userDialog.formInput,"departmentId",t)},expression:"userDialog.formInput.departmentId"}},[e._v(" "+e._s("")+" ")])]}}])}),a("el-table-column",{attrs:{type:"index",width:"80",label:"索引"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.userDialog.isShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},l=[],o=a("0904"),s=o["a"],i=a("2877"),n=Object(i["a"])(s,r,l,!1,null,"4a82d2db",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-5bfedc50.896b0db8.js.map